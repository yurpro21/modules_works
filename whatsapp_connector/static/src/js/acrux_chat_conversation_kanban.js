odoo.define("whatsapp_connector.conversation_kanban",(function(require){"use strict";var ConversationKanban=require("whatsapp_connector.kanban_view").extend({init:function(parent,options){options&&(options.model="acrux.chat.conversation"),this._super.apply(this,arguments),this.parent=parent,this.context=_.extend({},this.context)},start:function(){return this._super().then((()=>this.parent.product_search.minimize()))},_showAcruxFormView:function(){return this._super().then((()=>{this.acrux_form_widget._onOpenRecord=this._onOpenRecord.bind(this)}))},_onOpenRecord:function(ev){const record=this.acrux_form_widget.model.get(ev.data.id,{raw:!0});this._rpc({model:this.parent.model,method:"build_dict",args:[[record.data.id],22],context:this.context}).then((result=>this.parent.onInitConversation(result[0])))},_resequenceRecords:function(data){return this._super(data).then((out=>{if(data?.record?.recordData?.id){const backOut=out;out=this._rpc({model:this.parent.model,method:"update_conversation_bus",args:[[data.record.recordData.id]],context:this.context}).then((()=>backOut))}return out}))}});return ConversationKanban}));